<div class="game-winodw">
	<div *ngIf="showShareId"
		class="id-container">
		<div>Give this ID to your friend:</div>
		<span id="idText">{{id}}</span>
		<div *ngIf="!isStatsDialogOpen"
			class="loading-spinner">
			<mat-spinner [diameter]="80"></mat-spinner>
			<span>Waiting for player to load in...</span>
		</div>
	</div>
	<div *ngIf="showStartGameButton"
		class="center-flex-column">
		<button mat-raised-button
			color="primary"
			(click)="showStartDialog()">Start Game</button>
	</div>
	<div *ngIf="showOpponentSelecting"
		class="center-flex-column waiting">
		Your opponent is selecting their stats. Please wait...
		<mat-spinner></mat-spinner>
	</div>

	<!-- GAME STARTED WINDOW -->
	<div *ngIf="game && game.gameStarted && allPlayersAlive"
		class="fight-details">
		<phase-stepper [stepperData]="stepperData"></phase-stepper>
		<div class="players-container">
			<ng-container *ngIf="showOtherPlayersDetails; else noRights">
				<player-details class="opponent-player"
					[player]="opponent"
					[myTurn]="!myTurn"
					[showOtherData]="true"></player-details>
			</ng-container>
			<ng-template #noRights>
				<player-details class="opponent-player"
					[myTurn]="!myTurn"
					[player]="opponent"></player-details>
			</ng-template>
			<h4>VS.</h4>
			<player-details class="my-player"
				[player]="myPlayer"
				[myTurn]="myTurn"
				[showOtherData]="true"></player-details>
		</div>
	</div>

	<!-- GAME OVER -->
	<div *ngIf="game && game.gameOver"
		class="game-over-container">
		<div class="winner-info">
			<h3>{{ gameWinner.name }} Wins!</h3>
			<h5>"{{ gameWinner.winTag }}"</h5>
		</div>
		<div>
			<span class="loser-info">"{{ gameLoser.lossTag }}" - {{ gameLoser.name }}</span>
		</div>
	</div>
</div>

<div class="bottom container">
	<div class="message-details"
		id="message-details">
		<ng-container *ngIf="game?.messages">
			<ng-container *ngFor="let message of game?.messages">
				<div class="date-container">
					<span>{{ message.message }}</span>
					<div class="mssg-info">
						<span class="message-info">{{ message.sender }}</span>
						<span class="message-info time">{{ message.time.toDate() | date:'shortTime' }}</span>
					</div>
				</div>
			</ng-container>
		</ng-container>
	</div>
	
	<mat-card>
		<button mat-raised-button
			color="primary"
			[disabled]="disableActions"
			(click)="openActions()">Actions</button>
		<button [disabled]="!game"
			mat-mini-fab
			color="primary"
			(click)="openMessageDialog()">
			<mat-icon>message</mat-icon>
		</button>
		<button mat-raised-button
			color="primary"
			[disabled]="disableActions || this.game.phase !== 'block'"
			(click)="block()">Block</button>
	</mat-card>
</div>